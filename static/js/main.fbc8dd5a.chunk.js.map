{"version":3,"sources":["lib/helpers.js","utils/Bus.js","components/BootstrapSpinner.js","components/Navbar.js","components/Flashes.js","lib/useIsMounted.js","components/PostCard.js","components/PostsCards.js","components/Posts.js","pages/PostsPage.js","components/SubmitBtn.js","components/PostCommentForm.js","components/PostComments.js","pages/PostPage.js","components/SignUpForm.js","pages/SignUpPage.js","components/SignInForm.js","pages/SignInPage.js","App.js","reportWebVitals.js","index.js"],"names":["getData","a","url","fetch","method","headers","Authorization","localStorage","getItem","response","json","window","flashes","msg","postData","data","body","JSON","stringify","handleExpressErr","err","message","EventEmitter","BootstrapSpinner","type","size","className","style","width","height","role","Navbar","user","signOut","to","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","exact","activeClassName","aria-haspopup","username","onClick","Flashes","onFlashDelete","Fragment","map","flash","aria-hidden","useIsMounted","useState","isMounted","setIsMouted","useEffect","PostCard","post","postCommentsLength","title","author","firstName","lastName","format","Date","createdAt","_id","pluralize","comments","length","PostsCards","postsCards","posts","propTypes","PropTypes","array","isRequired","Posts","isFetchingPosts","setIsFetchingPosts","setPosts","fetchPosts","fetchAndAttachPostsToComments","Promise","all","process","postsWithComments","newPosts","fetchAndSetPosts","minHeight","PostsPage","SubmitBtn","text","isSubmitting","disabled","defaultProps","PostCommentForm","postId","updatePostComments","state","setState","setIsSubmitting","e","preventDefault","errors","prevState","comment","onSubmit","htmlFor","name","value","onChange","target","required","maxLength","PostComments","postComments","postComment","PostPage","useParams","history","useHistory","isFetchingPost","setIsFetchingPost","setPost","isFetchingPostComments","setIsFetchingPostComments","setPostComments","fetchPostComments","fetchPost","includes","status","push","fetchAndSetPostAndPostComments","published","SignUpForm","password","confirmPassword","handleInputChange","userFormData","placeholder","pattern","minLength","SignUpPage","SignInForm","setUser","setItem","token","SignInPage","App","setFlashes","Bus","addListener","flashesWithId","nanoid","emit","timeoutId","setTimeout","clearTimeout","fetchAndSetUser","intervalId","setInterval","clearInterval","removeItem","flashId","newFlashes","filter","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","require","config","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fbc8dd5a.chunk.js","sourcesContent":["async function getData(url = '') {\n\ttry {\n\t\tconst response = await fetch(url, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t},\n\t\t});\n\t\treturn response.json();\n\t} catch (err) {\n\t\twindow.flashes([{ msg: 'Something went wrong, please try again later.' }]);\n\t}\n}\n\nasync function postData(url = '', data = {}) {\n\ttry {\n\t\tconst response = await fetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t},\n\t\t\tbody: JSON.stringify(data),\n\t\t});\n\t\treturn response.json();\n\t} catch (err) {\n\t\twindow.flashes([{ msg: 'Something went wrong, please try again later.' }]);\n\t}\n}\n\nfunction handleExpressErr(err) {\n\twindow.flashes([{ msg: err.message }]);\n}\n\nexport { getData, postData, handleExpressErr };\n","import EventEmitter from 'events';\n\nexport default new EventEmitter();\n","import PropTypes from 'prop-types';\nimport '../css/BootstrapSpinner.css';\n\nfunction BootstrapSpinner({ type, size }) {\n\treturn (\n\t\t<div className=\"BootstrapSpinner\">\n\t\t\t<div\n\t\t\t\tclassName={`spinner-${type} text-primary`}\n\t\t\t\tstyle={{ width: size, height: size }}\n\t\t\t\trole=\"status\"\n\t\t\t>\n\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nBootstrapSpinner.propTypes = {\n\ttype: PropTypes.string.isRequired,\n\tsize: PropTypes.string.isRequired,\n};\n\nexport default BootstrapSpinner;\n","import PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\n\nfunction Navbar({ user, signOut }) {\n\treturn (\n\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-primary sticky-top mb-4\">\n\t\t\t<NavLink to=\"/\" className=\"navbar-brand\">\n\t\t\t\tBlog User\n\t\t\t</NavLink>\n\t\t\t<button\n\t\t\t\tclassName=\"navbar-toggler\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tdata-toggle=\"collapse\"\n\t\t\t\tdata-target=\"#navbarSupportedContent\"\n\t\t\t\taria-controls=\"navbarSupportedContent\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t\taria-label=\"Toggle navigation\"\n\t\t\t>\n\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\n\t\t\t</button>\n\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n\t\t\t\t<ul className=\"navbar-nav ml-auto\">\n\t\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\tto=\"/posts\"\n\t\t\t\t\t\t\tclassName=\"nav-link\"\n\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPosts\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</li>\n\t\t\t\t\t{user ? (\n\t\t\t\t\t\t<li className=\"nav-item dropdown\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"nav-link btn btn-link dropdown-toggle\"\n\t\t\t\t\t\t\t\tid=\"navbarDropdown\"\n\t\t\t\t\t\t\t\tdata-toggle=\"dropdown\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div className=\"dropdown-menu dropdown-menu-right\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"dropdown-item\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={signOut}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSign out\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tto=\"/auth/sign-up\"\n\t\t\t\t\t\t\t\t\tclassName=\"nav-link\"\n\t\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tto=\"/auth/sign-in\"\n\t\t\t\t\t\t\t\t\tclassName=\"nav-link\"\n\t\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSign In\n\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</nav>\n\t);\n}\n\nNavbar.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n\tsignOut: PropTypes.func.isRequired,\n};\n\nexport default Navbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Flashes({ flashes, onFlashDelete }) {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{flashes.map((flash) => (\n\t\t\t\t<div\n\t\t\t\t\tkey={flash.id}\n\t\t\t\t\tclassName={`alert alert-${flash.type || 'danger'} alert-dismissible`}\n\t\t\t\t\trole=\"alert\"\n\t\t\t\t>\n\t\t\t\t\t{flash.msg}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\tonClick={() => onFlashDelete(flash.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</React.Fragment>\n\t);\n}\n\nFlashes.propTypes = {\n\tflashes: PropTypes.array.isRequired,\n\tonFlashDelete: PropTypes.func.isRequired,\n};\n\nexport default Flashes;\n","import { useEffect, useState } from 'react';\n\nconst useIsMounted = () => {\n\tconst [isMounted, setIsMouted] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetIsMouted(true);\n\t\treturn () => setIsMouted(false);\n\t}, []);\n\n\treturn isMounted;\n};\nexport default useIsMounted;\n","import PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport format from 'date-fns/format';\nimport pluralize from 'pluralize';\n\nfunction PostCard({ post, postCommentsLength }) {\n\treturn (\n\t\t<article className=\"card mb-2\">\n\t\t\t<div className=\"card-header\">\n\t\t\t\t<h5 className=\"card-title\">{post.title}</h5>\n\t\t\t\t<p className=\"card-subtitle mb-2\">\n\t\t\t\t\t{post.author.firstName + ' ' + post.author.lastName}\n\t\t\t\t</p>\n\t\t\t\t<p className=\"card-subtitle\">\n\t\t\t\t\t{format(new Date(post.createdAt), 'PPpp')}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"card-body\">\n\t\t\t\t<p className=\"card-text\">{post.body}</p>\n\t\t\t\t<Link to={`/posts/${post._id}`} className=\"card-link\">\n\t\t\t\t\t{pluralize(\n\t\t\t\t\t\t'comments',\n\t\t\t\t\t\tpost.comments ? post.comments.length : postCommentsLength,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)}\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</article>\n\t);\n}\n\nPostCard.propTypes = {\n\tpost: PropTypes.object.isRequired,\n\tpostCommentsLength: PropTypes.number,\n};\n\nexport default PostCard;\n","import PropTypes from 'prop-types';\nimport PostCard from './PostCard';\n\nfunction PostsCards({ posts }) {\n\tconst postsCards = posts.map((post) => (\n\t\t<PostCard key={post._id} post={post} />\n\t));\n\n\treturn <>{postsCards}</>;\n}\n\nPostsCards.propTypes = {\n\tposts: PropTypes.array.isRequired,\n};\n\nexport default PostsCards;\n","import { useState, useEffect } from 'react';\nimport useIsMounted from '../lib/useIsMounted';\nimport { getData, handleExpressErr } from '../lib/helpers';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport PostsCards from './PostsCards';\n\nfunction Posts() {\n\tconst isMounted = useIsMounted();\n\n\tconst [isFetchingPosts, setIsFetchingPosts] = useState(false);\n\tconst [posts, setPosts] = useState([]);\n\n\tasync function fetchAndSetPosts() {\n\t\tasync function fetchPosts() {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(`${process.env.REACT_APP_API_URL}/posts`);\n\t\t\t\tif (data.err) {\n\t\t\t\t\thandleExpressErr(data.err);\n\t\t\t\t} else {\n\t\t\t\t\treturn data.posts;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tasync function fetchAndAttachPostsToComments(posts) {\n\t\t\ttry {\n\t\t\t\tconst postsWithComments = await Promise.all(\n\t\t\t\t\tposts.map(async (post) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst data = await getData(\n\t\t\t\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/comments`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (data.err) {\n\t\t\t\t\t\t\t\thandleExpressErr(data.err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn { ...post, comments: data.comments };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\twindow.flashes([\n\t\t\t\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn postsWithComments;\n\t\t\t} catch (err) {\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tsetIsFetchingPosts(true);\n\t\tconst posts = await fetchPosts();\n\t\tconst newPosts = await fetchAndAttachPostsToComments(posts);\n\t\tsetIsFetchingPosts(false);\n\t\tsetPosts(newPosts);\n\t}\n\n\tuseEffect(() => {\n\t\tisMounted && fetchAndSetPosts();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isMounted]);\n\n\treturn isFetchingPosts ? (\n\t\t<div className=\"position-relative\" style={{ minHeight: '30em' }}>\n\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t</div>\n\t) : (\n\t\t<PostsCards posts={posts} />\n\t);\n}\n\nexport default Posts;\n","import Posts from '../components/Posts';\n\nfunction PostsPage() {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<Posts />\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default PostsPage;\n","import PropTypes from 'prop-types';\n\nfunction SubmitBtn({ text, isSubmitting }) {\n\treturn isSubmitting ? (\n\t\t<button type=\"submit\" className=\"btn btn-primary w-100\" disabled>\n\t\t\t<span\n\t\t\t\tclassName=\"spinner-border spinner-border-sm\"\n\t\t\t\trole=\"status\"\n\t\t\t\taria-hidden=\"true\"\n\t\t\t></span>\n\t\t\tSubmitting...\n\t\t</button>\n\t) : (\n\t\t<button type=\"submit\" className=\"btn btn-primary w-100\">\n\t\t\t{text}\n\t\t</button>\n\t);\n}\n\nSubmitBtn.defaultProps = {\n\ttext: 'Submit',\n};\n\nSubmitBtn.propTypes = {\n\ttext: PropTypes.string.isRequired,\n\tisSubmitting: PropTypes.bool.isRequired,\n};\n\nexport default SubmitBtn;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport useIsMounted from '../lib/useIsMounted';\nimport { postData, handleExpressErr } from '../lib/helpers';\nimport SubmitBtn from './SubmitBtn';\n\nfunction PostCommentForm({ postId, updatePostComments }) {\n\tconst isMounted = useIsMounted();\n\n\tconst [state, setState] = useState({\n\t\tbody: '',\n\t});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tasync function handleSubmit(e) {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tsetIsSubmitting(true);\n\t\t\tconst data = await postData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}/comments`,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tsetIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else if (data.errors) {\n\t\t\t\tisMounted &&\n\t\t\t\t\tsetState((prevState) => ({\n\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\tbody: data.comment.body,\n\t\t\t\t\t}));\n\t\t\t\twindow.flashes(data.errors);\n\t\t\t} else {\n\t\t\t\tif (isMounted) {\n\t\t\t\t\tsetState((prevState) => ({ ...prevState, body: '' }));\n\t\t\t\t\tupdatePostComments(postId);\n\t\t\t\t}\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'Comment successfully created', type: 'success' },\n\t\t\t\t]);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit} className=\"mb-2\">\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"body\">Write a comment</label>\n\t\t\t\t<textarea\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"body\"\n\t\t\t\t\tname=\"body\"\n\t\t\t\t\tvalue={state.body}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength={200}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn text={'Comment'} isSubmitting={isSubmitting} />\n\t\t</form>\n\t);\n}\n\nPostCommentForm.propTypes = {\n\tpostId: PropTypes.string.isRequired,\n\tupdatePostComments: PropTypes.func.isRequired,\n};\n\nexport default PostCommentForm;\n","import PropTypes from 'prop-types';\nimport format from 'date-fns/format';\n\nfunction PostComments({ postComments }) {\n\treturn postComments.length > 0 ? (\n\t\t<ul className=\"list-group\">\n\t\t\t{postComments.map((postComment) => (\n\t\t\t\t<li key={postComment._id} className=\"list-group-item\">\n\t\t\t\t\t<p className=\"h6 mb-1\">\n\t\t\t\t\t\t{postComment.author.firstName + ' ' + postComment.author.lastName}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"text-muted mb-2\">\n\t\t\t\t\t\t{format(new Date(postComment.createdAt), 'PPpp')}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"mb-2\">{postComment.body}</p>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t) : null;\n}\n\nPostComments.propTypes = {\n\tpostComments: PropTypes.array.isRequired,\n};\n\nexport default PostComments;\n","import { useState, useEffect } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport useIsMounted from '../lib/useIsMounted';\nimport { getData, handleExpressErr } from '../lib/helpers';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport PostCard from '../components/PostCard';\nimport PostCommentForm from '../components/PostCommentForm';\nimport PostComments from '../components/PostComments';\n\nfunction PostPage({ user }) {\n\tconst { postId } = useParams();\n\tconst history = useHistory();\n\n\tconst isMounted = useIsMounted();\n\n\tconst [isFetchingPost, setIsFetchingPost] = useState(false);\n\tconst [post, setPost] = useState({});\n\tconst [isFetchingPostComments, setIsFetchingPostComments] = useState(false);\n\tconst [postComments, setPostComments] = useState([]);\n\n\tasync function fetchPostComments(postId) {\n\t\ttry {\n\t\t\tconst data = await getData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}/comments`\n\t\t\t);\n\t\t\tif (data.err) {\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else {\n\t\t\t\treturn data.comments;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\tasync function updatePostComments(postId) {\n\t\tif (isMounted) {\n\t\t\tconst postComments = await fetchPostComments(postId);\n\t\t\tsetPostComments([...postComments]);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tasync function fetchPost(postId) {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\tif ([401, 404].includes(data.err.status)) {\n\t\t\t\t\t\thistory.push('/');\n\t\t\t\t\t}\n\t\t\t\t\thandleExpressErr(data.err);\n\t\t\t\t} else {\n\t\t\t\t\treturn data.post;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tasync function fetchAndSetPostAndPostComments(postId) {\n\t\t\tsetIsFetchingPost(true);\n\t\t\tconst post = await fetchPost(postId);\n\t\t\tsetIsFetchingPost(false);\n\t\t\tsetPost(post);\n\t\t\tsetIsFetchingPostComments(true);\n\t\t\tconst postComments = await fetchPostComments(postId);\n\t\t\tsetIsFetchingPostComments(false);\n\t\t\tsetPostComments(postComments);\n\t\t}\n\n\t\tisMounted && fetchAndSetPostAndPostComments(postId);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isMounted, postId]);\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t{isFetchingPost ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"bootstrap-spinner-container\"\n\t\t\t\t\t\t\t\tstyle={{ minHeight: '30em' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tpost._id && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<PostCard\n\t\t\t\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\t\t\t\tpostCommentsLength={postComments.length}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{user && post.published && (\n\t\t\t\t\t\t\t\t\t\t<PostCommentForm\n\t\t\t\t\t\t\t\t\t\t\tpostId={postId}\n\t\t\t\t\t\t\t\t\t\t\tupdatePostComments={updatePostComments}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{isFetchingPostComments ? (\n\t\t\t\t\t\t\t<div className=\"position-relative\" style={{ minHeight: '10em' }}>\n\t\t\t\t\t\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<PostComments postComments={postComments} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPostPage.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n};\n\nexport default PostPage;\n","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useIsMounted from '../lib/useIsMounted';\nimport { postData, handleExpressErr } from '../lib/helpers';\nimport SubmitBtn from './SubmitBtn';\n\nfunction SignUpForm() {\n\tconst history = useHistory();\n\n\tconst isMounted = useIsMounted();\n\n\tconst [state, setState] = useState({\n\t\tfirstName: '',\n\t\tlastName: '',\n\t\tusername: '',\n\t\tpassword: '',\n\t\tconfirmPassword: '',\n\t});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tasync function handleSubmit(e) {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tsetIsSubmitting(true);\n\t\t\tconst data = await postData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/users`,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tsetIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else if (data.errors) {\n\t\t\t\tisMounted &&\n\t\t\t\t\tsetState({\n\t\t\t\t\t\tfirstName: data.userFormData.firstName,\n\t\t\t\t\t\tlastName: data.userFormData.lastName,\n\t\t\t\t\t\tusername: data.userFormData.username,\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\tconfirmPassword: '',\n\t\t\t\t\t});\n\t\t\t\twindow.flashes(data.errors);\n\t\t\t} else {\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'You have successfuly signed up', type: 'success' },\n\t\t\t\t]);\n\t\t\t\thistory.push('/');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"firstName\">First name</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"firstName\"\n\t\t\t\t\tplaceholder=\"John\"\n\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\tvalue={state.firstName}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"255\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"lastName\">Last name</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"lastName\"\n\t\t\t\t\tplaceholder=\"Doe\"\n\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\tvalue={state.lastName}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"255\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tplaceholder=\"johnDoe01\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tvalue={state.username}\n\t\t\t\t\trequired\n\t\t\t\t\tpattern=\"^[a-zA-Z0-9-_]+$\"\n\t\t\t\t\ttitle=\"Username can only contain letters, numbers, - and _'\"\n\t\t\t\t\tmaxLength=\"20\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={state.password}\n\t\t\t\t\trequired\n\t\t\t\t\tminLength=\"8\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"confirmPassword\">Password confirmation</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"confirmPassword\"\n\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\tvalue={state.confirmPassword}\n\t\t\t\t\trequired\n\t\t\t\t\tminLength=\"8\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn isSubmitting={isSubmitting} />\n\t\t</form>\n\t);\n}\n\nexport default SignUpForm;\n","import SignUpForm from '../components/SignUpForm';\n\nfunction SignUpPage() {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-6\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<SignUpForm />\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SignUpPage;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport useIsMounted from '../lib/useIsMounted';\nimport { postData, handleExpressErr } from '../lib/helpers';\nimport SubmitBtn from './SubmitBtn';\n\nfunction SignInForm({ setUser }) {\n\tconst history = useHistory();\n\n\tconst isMounted = useIsMounted();\n\n\tconst [state, setState] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tasync function handleSubmit(e) {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tsetIsSubmitting(true);\n\t\t\tconst data = await postData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/auth/sign-in`,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tsetIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\tisMounted && setState((prevState) => ({ ...prevState, password: '' }));\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('jwt', data.token);\n\t\t\t\tsetUser(data.user);\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'You have successfuly signed in', type: 'success' },\n\t\t\t\t]);\n\t\t\t\thistory.push('/');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tplaceholder=\"johnDoe01\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tvalue={state.username}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"20\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={state.password}\n\t\t\t\t\trequired\n\t\t\t\t\tminLength=\"8\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn isSubmitting={isSubmitting} />\n\t\t</form>\n\t);\n}\n\nSignInForm.propTypes = {\n\tsetUser: PropTypes.func.isRequired,\n};\n\nexport default SignInForm;\n","import PropTypes from 'prop-types';\nimport SignInForm from '../components/SignInForm';\n\nfunction SignInPage({ setUser }) {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-6\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<SignInForm setUser={setUser} />\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSignInPage.propTypes = {\n\tsetUser: PropTypes.func.isRequired,\n};\n\nexport default SignInPage;\n","import { useState, useEffect } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport { nanoid } from 'nanoid';\nimport { getData } from './lib/helpers';\nimport Bus from './utils/Bus';\nimport BootstrapSpinner from './components/BootstrapSpinner';\nimport Navbar from './components/Navbar';\nimport Flashes from './components/Flashes';\nimport PostsPage from './pages/PostsPage';\nimport PostPage from './pages/PostPage';\nimport SignUpPage from './pages/SignUpPage';\nimport SignInPage from './pages/SignInPage';\nimport './App.css';\n\nfunction App() {\n\tconst history = useHistory();\n\n\tconst [user, setUser] = useState(null);\n\tconst [flashes, setFlashes] = useState([]);\n\n\tfunction signOut() {\n\t\tlocalStorage.removeItem('jwt');\n\t\tsetUser(false);\n\t\twindow.flashes([\n\t\t\t{ msg: 'You have successfully signed out', type: 'success' },\n\t\t]);\n\t\thistory.push('/');\n\t}\n\n\tfunction handleFlashDelete(flashId) {\n\t\tconst newFlashes = flashes.filter((flash) => flash.id !== flashId);\n\t\tsetFlashes(newFlashes);\n\t}\n\n\tuseEffect(() => {\n\t\tBus.addListener('flashes', (flashes) => {\n\t\t\tconst flashesWithId = flashes.map((flash) => ({\n\t\t\t\t...flash,\n\t\t\t\tid: nanoid(),\n\t\t\t}));\n\t\t\tsetFlashes(flashesWithId);\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\twindow.flashes = (flashes) => Bus.emit('flashes', flashes);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (flashes.length > 0) {\n\t\t\tconst timeoutId = setTimeout(() => setFlashes([]), 4000);\n\t\t\treturn () => clearTimeout(timeoutId);\n\t\t}\n\t}, [flashes]);\n\n\tuseEffect(() => {\n\t\tasync function fetchAndSetUser() {\n\t\t\tconst data = await getData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/users/current-user`\n\t\t\t);\n\t\t\tsetUser(data.user);\n\t\t}\n\t\tfetchAndSetUser();\n\t\tconst intervalId = setInterval(fetchAndSetUser, 30000);\n\t\treturn () => clearInterval(intervalId);\n\t}, []);\n\n\treturn user === null ? (\n\t\t<BootstrapSpinner type={'grow'} size={'3em'} />\n\t) : (\n\t\t<>\n\t\t\t<Navbar user={user} signOut={signOut} />\n\t\t\t{flashes.length > 0 && (\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t\t\t<Flashes flashes={flashes} onFlashDelete={handleFlashDelete} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<main>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t<Redirect to=\"/posts\" />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/posts\">\n\t\t\t\t\t\t<PostsPage />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/posts/:postId\">\n\t\t\t\t\t\t<PostPage user={user} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/auth/sign-up\">\n\t\t\t\t\t\t{user ? <Redirect to=\"/\" /> : <SignUpPage />}\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/auth/sign-in\">\n\t\t\t\t\t\t{user ? <Redirect to=\"/\" /> : <SignInPage setUser={setUser} />}\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</main>\n\t\t</>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from 'react-router-dom';\nimport 'bootswatch/dist/litera/bootstrap.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.js';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nrequire('dotenv').config();\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Router>\n\t\t\t<App />\n\t\t</Router>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}